local ffi = require 'ffi'
local chipmunk = cheetah.loadDLL 'chipmunk'
local cp = {
	--~ v = chipmunk.v,
}
cp.vzero = ffi.new('cpVect', {0,0})

ffi.metatype('cpBody', {
	__index = {
		init = chipmunk.BodyInit,
		initStatic = chipmunk.BodyInitStatic,
		newStatic = chipmunk.BodyNewStatic,
		destroy = chipmunk.BodyDestroy,
		sanityCheck = cpBodySanityCheck,
		activate = chipmunk.BodyActivate,
		activateStatic = chipmunk.BodyActivateStatic,
		sleep = chipmunk.BodySleep,
		sleepWithGroup = chipmunk.BodySleepWithGroup,
		isSleeping = chipmunk.BodyIsSleeping,
		isStatic = chipmunk.BodyIsStatic,
		isRogue = chipmunk.BodyIsRogue,
		getMass = chipmunk.BodyGetMass,
		setMass = chipmunk.BodySetMass,
		getMoment = chipmunk.BodyGetMoment,
		setMoment = chipmunk.BodySetMoment,
		getPos = chipmunk.BodyGetPos,
		setPos = chipmunk.BodySetPos,
		getVel = chipmunk.BodyGetVel,
		setVel = chipmunk.BodySetVel,
		getForce = chipmunk.BodyGetForce,
		setForce = chipmunk.BodySetForce,
		getAngle = chipmunk.BodyGetAngle,
		setAngle = chipmunk.BodySetAngle,
		getAngVel = chipmunk.BodyGetAngVel,
		setAngVel = chipmunk.BodySetAngVel,
		getTorque = chipmunk.BodyGetTorque,
		setTorque = chipmunk.BodySetTorque,
		getRot = chipmunk.BodyGetRot,
		getVelLimit = chipmunk.BodyGetVelLimit,
		setVelLimit = chipmunk.BodySetVelLimit,
		getAngVelLimit = chipmunk.BodyGetAngVelLimit,
		setAngVelLimit = chipmunk.BodySetAngVelLimit,
		getUserData = chipmunk.BodyGetUserData,
		setUserData = chipmunk.BodySetUserData,
		updateVelocity = chipmunk.BodyUpdateVelocity,
		updatePosition = chipmunk.BodyUpdatePosition,
		local2World = chipmunk.BodyLocal2World,
		world2Local = chipmunk.BodyWorld2Local,
		resetForces = chipmunk.BodyResetForces,
		applyForce = chipmunk.BodyApplyForce,
		applyImpulse = chipmunk.BodyApplyImpulse,
		getVelAtWorldPoint = chipmunk.BodyGetVelAtWorldPoint,
		getVelAtLocalPoint = chipmunk.BodyGetVelAtLocalPoint,
	},
	__gc = chipmunk.BodyFree
})

ffi.metatype('cpShape', {
	__index = {
		destroy = chipmunk.ShapeDestroy,
		cacheBB = chipmunk.ShapeCacheBB,
		update = chipmunk.ShapeUpdate,
		pointQuery = chipmunk.ShapePointQuery,
		getBody = chipmunk.ShapeGetBody,
		setBody = chipmunk.ShapeSetBody,
		getBB = chipmunk.ShapeGetBB,
		getSensor = chipmunk.ShapeGetSensor,
		setSensor = chipmunk.ShapeSetSensor,
		getElasticity = chipmunk.ShapeGetElasticity,
		setElasticity = chipmunk.ShapeSetElasticity,
		getFriction = chipmunk.ShapeGetFriction,
		setFriction = chipmunk.ShapeSetFriction,
		getSurfaceVelocity = chipmunk.ShapeGetSurfaceVelocity,
		setSurfaceVelocity = chipmunk.ShapeSetSurfaceVelocity,
		getUserData = chipmunk.ShapeGetUserData,
		setUserData = chipmunk.ShapeSetUserData,
		getCollisionType = chipmunk.ShapeGetCollisionType,
		setCollisionType = chipmunk.ShapeSetCollisionType,
		getGroup = chipmunk.ShapeGetGroup,
		setGroup = chipmunk.ShapeSetGroup,
		getLayers = chipmunk.ShapeGetLayers,
		setLayers = chipmunk.ShapeSetLayers,
		segmentQuery = chipmunk.ShapeSegmentQuery,
	},
	__gc = chipmunk.ShapeFree
})

ffi.metatype('cpSpace', {
	__index = {
		destroy = chipmunk.SpaceDestroy,
		getIterations = chipmunk.SpaceGetIterations,
		setIterations = chipmunk.SpaceSetIterations,
		getGravity = chipmunk.SpaceGetGravity,
		setGravity = chipmunk.SpaceSetGravity,
		getDamping = chipmunk.SpaceGetDamping,
		setDamping = chipmunk.SpaceSetDamping,
		getIdleSpeedThreshold = chipmunk.SpaceGetIdleSpeedThreshold,
		setIdleSpeedThreshold = chipmunk.SpaceSetIdleSpeedThreshold,
		getSleepTimeThreshold = chipmunk.SpaceGetSleepTimeThreshold,
		setSleepTimeThreshold = chipmunk.SpaceSetSleepTimeThreshold,
		getCollisionSlop = chipmunk.SpaceGetCollisionSlop,
		setCollisionSlop = chipmunk.SpaceSetCollisionSlop,
		getCollisionBias = chipmunk.SpaceGetCollisionBias,
		setCollisionBias = chipmunk.SpaceSetCollisionBias,
		getCollisionPersistence = chipmunk.SpaceGetCollisionPersistence,
		setCollisionPersistence = chipmunk.SpaceSetCollisionPersistence,
		getEnableContactGraph = chipmunk.SpaceGetEnableContactGraph,
		setEnableContactGraph = chipmunk.SpaceSetEnableContactGraph,
		getUserData = chipmunk.SpaceGetUserData,
		setUserData = chipmunk.SpaceSetUserData,
		getStaticBody = chipmunk.SpaceGetStaticBody,
		getCurrentTimeStep = chipmunk.SpaceGetCurrentTimeStep,
		isLocked = chipmunk.SpaceIsLocked,
		removeCollisionHandler = chipmunk.SpaceRemoveCollisionHandler,
		addShape = chipmunk.SpaceAddShape,
		addStaticShape = chipmunk.SpaceAddStaticShape,
		addBody = chipmunk.SpaceAddBody,
		addConstraint = chipmunk.SpaceAddConstraint,
		removeShape = chipmunk.SpaceRemoveShape,
		removeStaticShape = chipmunk.SpaceRemoveStaticShape,
		removeBody = chipmunk.SpaceRemoveBody,
		removeConstraint = chipmunk.SpaceRemoveConstraint,
		containsShape = chipmunk.SpaceContainsShape,
		containsBody = chipmunk.SpaceContainsBody,
		containsConstraint = chipmunk.SpaceContainsConstraint,
		addPostStepCallback = chipmunk.SpaceAddPostStepCallback,
		pointQuery = chipmunk.SpacePointQuery,
		pointQueryFirst = chipmunk.SpacePointQueryFirst,
		segmentQuery = chipmunk.SpaceSegmentQuery,
		segmentQueryFirst = chipmunk.SpaceSegmentQueryFirst,
		bBQuery = chipmunk.SpaceBBQuery,
		shapeQuery = chipmunk.SpaceShapeQuery,
		activateShapesTouchingShape = chipmunk.SpaceActivateShapesTouchingShape,
		eachBody = chipmunk.SpaceEachBody,
		eachShape = chipmunk.SpaceEachShape,
		eachConstraint = chipmunk.SpaceEachConstraint,
		reindexStatic = chipmunk.SpaceReindexStatic,
		reindexShape = chipmunk.SpaceReindexShape,
		reindexShapesForBody = chipmunk.SpaceReindexShapesForBody,
		useSpatialHash = chipmunk.SpaceUseSpatialHash,
		step = chipmunk.SpaceStep,
	},
	__gc = chipmunk.SpaceFree
})






setmetatable(cp, { __index = chipmunk})
return cp